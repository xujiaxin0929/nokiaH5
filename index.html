<!DOCTYPE html>

<html lang="zh-CN">

<head>

    <meta charset="utf-8">

    <title>2018销售大会邀请函</title>

    <!--<link rel="stylesheet" href="css/jquery.fullPage.css">-->
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/jquery-ui-1.10.3.min.js"></script>
    <script src="js/jquery.fullPage.min.js"></script>
    <script src="js/flexible_css.js"></script>
    <script src="js/flexible.js"></script>
    <!--<script src="js/audio.js"></script>-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.5.2/animate.min.css">
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script>
        $(document).ready(function () {
            var scriptappend,scriptremove;
            var myVideo = document.getElementById("audiofirst");
            var lastVideo = document.getElementById("audiolast");
            var audio,audioo;
            $('#fullpage').fullpage({

                // slidesColor: ['#1bbc9b', '#4BBFC3', '#7BAABE', '#f90'],
                
                anchors: ['page1', 'page2', 'page3', 'page4', 'page5', 'page6', 'page7'],
                'setAutoScrolling': true,
                onLeave: function (index, nextIndex) {
                    console.log(index, nextIndex)
                    // console.log(nextIndex)
                    if (index == 1) {
                        myVideo.pause();
                    }



                },
                afterLoad: function (anchorLink, index) {
                    console.log(index);
                    //清除所有的current样式
                    $(".section").removeClass("current");
                    //添加类名
                    setTimeout(function () {
                        $(".section").eq(index - 1).addClass("current");
                    }, 30)

                    if (index == '1' || index == '2') {
                        lastVideo.pause();

                    } else if (index == '3') {
                        $('.section_three').trigger("click");
                       
                        $('.section_three').click(function(){
                            // alert(1)
                            audioAutoPlay2('audiolast');
                        })
                        
                        // alert(1)
                        // lastVideo.play();
                        // $('#audiolast').trigger("click");
                        // audioAutoPlay('audiolast')
                        /*$('#audiolast').on('click',function(){
                            lastVideo.play();
                        })
                        setTimeout(function () {
                            // IE
                            if (document.all) {
                                document.getElementById("audiolast").click();
                            }
                            // 其它浏览器
                            else {
                                var e = document.createEvent("MouseEvents");
                                e.initEvent("click", true, true);
                                document.getElementById("audiolast").dispatchEvent(e);
                            }
                        }, 10);*/
                    }
                    // 添加css3
                    if (index == '1') {
                        $('.section_fitst .page1_p').show().addClass('animated bounceInDown');
                    } else {
                        $('.section_fitst .page1_p').hide().removeClass('animated bounceInDown');
                    }
                    if (index == '2') {
                        $('.page1_jiantou').removeClass('show');
                        $('.section_two .page2_right').show();
                    } else {
                        $('.section_two .page2_right').hide();
                    }
                    if (index == '3') {
                        setTimeout(function () {
                            $('.section_three .page3_3').show().addClass('animated flip');
                        }, 600)
                        setTimeout(function () {
                            $('.section_three .page3_4').show().addClass('animated flip');
                        }, 400)
                        // setTimeout(function () {
                        //     $('.section_three .page3_6').show().addClass('animated bounceInUp');
                        // }, 2000)


                    } else {
                        $('.section_three .page3_3').hide().removeClass('animated flip');
                        $('.section_three .page3_4').hide().removeClass('animated flip');
                        // $('.section_three .page3_6').hide().removeClass('animated bounceInUp');
                    }
                    if (index == '4') {
                        setTimeout(function () {
                            $('.section_four .page4_2').show().addClass('animated bounceInRight');
                        }, 500);
                        setTimeout(function () {
                            $('.section_four .page4_3').show().addClass('animated bounceInRight');
                        }, 500);
                        setTimeout(function () {
                            $('.section_four .page4_5').show().addClass('animated slideInLeft');
                        }, 1500);
                        setTimeout(function () {
                            $('.section_four .page4_6').show().addClass('animated fadeInUpBig');
                        }, 1700);
                        setTimeout(function () {
                            $('.section_four .page4_7').show().addClass('animated fadeInUpBig');
                        }, 1800);
                        setTimeout(function () {
                            $('.section_four .page4_8').show().addClass('animated fadeInUpBig');
                        }, 1900);

                    } else {
                        $('.section_four .page4_2').hide().removeClass('animated bounceInRight');
                        $('.section_four .page4_3').hide().removeClass('animated bounceInRight');
                        $('.section_four .page4_5').hide().removeClass('animated slideInLeft');
                        $('.section_four .page4_6').hide().removeClass('animated fadeInUpBig');
                        $('.section_four .page4_7').hide().removeClass('animated fadeInUpBig');
                        $('.section_four .page4_8').hide().removeClass('animated fadeInUpBig');
                    }
                    if (index == '5') {
                        setTimeout(function () {
                            $('.section_five .page5_3').show().addClass('animated wobble');
                        }, 500);
                    } else {
                        
                        $('.section_five .page5_3').hide().removeClass('animated wobble');
                    }
                    if (index == '6') {
                        $('.section_six .page6_1').show();
                        setTimeout(function () {
                            $('.section_six .page6_2').show();
                        }, 400);
                        setTimeout(function () {
                            $('.section_six .page6_3').show();
                        }, 800);
                        setTimeout(function () {
                            $('.section_six .page6_4').show();
                        }, 1200);
                    } else {
                        $('.section_six .page6_1').hide();
                        $('.section_six .page6_2').hide();
                        $('.section_six .page6_3').hide();
                        $('.section_six .page6_4').hide();
                    }
                    if (index == '7') {
                            $('.section_last .page7_want').show().addClass('animated bounceInDown');
                        setTimeout(function () {
                            $('.section_last .page7_erwei').show().addClass('animated rollIn');
                        }, 2200);
                    } else {
                        $('.section_last .page7_want').hide().removeClass('animated bounceInDown');
                        $('.section_last .page7_erwei').hide().removeClass('animated rollIn');
                    }


                }
            });

            // 点击播放背景音乐
            function play_music() {
                // event.stopPropagation();
                audioAutoPlay('audiofirst');
                console.log(1)

            }

            function click_music() {
                // event.stopPropagation();
                audioAutoPlay('clickaudio');
                console.log(2)

            }

            $('#mc_play').on('click', function (e) {
                $('.page1_cl').addClass('page1_cl_active');
                //点击后禁止首页再滑动 
                /*scriptappend = `$(document).ready(function(){
                    $("#fullpage").fullpage({normalScrollElements:".section_fitst"})
                    })`;*/
                //$('#appendfirstpage').html(scriptappend);   //将标签插入body尾部
                $('#model').addClass('show');
                click_music();
                setTimeout(() => {
                    play_music();
                }, 1000);
                setTimeout(() => {
                    /*scriptremove = `$(document).ready(function(){
                    $("#fullpage").fullpage({normalScrollElements:""})
                    })`;
                    $('#appendfirstpage').html(scriptremove);
                    */
                    $('.page1_jiantou').addClass('show');
                    $('#model').removeClass('show');
                }, 10000);
            })
            // setInterval(function () {
            //     $.fn.fullpage.moveSectionDown();
            // }, 20000);
            //自动播放背景音乐
            function audioAutoPlay(id) {
                audio = document.getElementById(id);
                audio.play();
                document.addEventListener("WeixinJSBridgeReady", function () {
                    audio.play();
                }, false);
                document.addEventListener('YixinJSBridgeReady', function () {
                    audio.play();
                }, false);
            }
            function audioAutoPlay2(id) {
                audioo = document.getElementById(id);
                audioo.play();
                document.addEventListener("WeixinJSBridgeReady", function () {
                    audioo.play();
                }, false);
                document.addEventListener('YixinJSBridgeReady', function () {
                    audioo.play();
                }, false);
            }
            function autoPlayAudio1() {
                wx.config({
                    // 配置信息, 即使不正确也能使用 wx.ready
                    debug: false,
                    appId: '',
                    timestamp: 1,
                    nonceStr: '',
                    signature: '',
                    jsApiList: []
                });
                wx.ready(function () {
                    document.getElementById('audiolast').play();
                });
            }

        });
    </script>
    
</head>

<body>
    <div class="load">
        <img src="images/load.gif" alt="">
    </div>
    <div class="model" id="model"></div>
    <div id="fullpage">
        <div class="section section_fitst current">
            <p class="page1_p">MUS<i>IC</i></p>
            <img src="images/page1_video_1.png" alt="" class="page1_video_1">
            <img src="images/page1_video_2.png" alt="" class="page1_video_2">
            <img src="images/WechatIMG31.png" alt="" class="page1_video_3">
            
            <img src="images/page1_cl.png" alt="" class="page1_cl_1 page1_cl">
            <img src="images/page1_cl.png" alt="" class="page1_cl_2 page1_cl">
            <img src="images/section_1_bg.png" alt="" class="page1_bg">
            <a href="javascript:;" id="mc_play" class="on">
                 <img src="images/play.png" alt="">
                 <audio controls preload='auto'id='audiofirst' class="foo">
                    <source src="vido.mp3" type="audio/mp3"></source>
                 </audio>
             </a>
             <img src="images/jiantouup.png" alt="" class="page1_jiantou">
        </div>

        <div class="section section_two ">
            <div class="page2_left ">
                <span>从</span>
                <span>台</span>
                <span>湾</span>
            </div>
            <div class="page2_top">
                <span>到</span>
            </div>
            <img src="images/page2_right.png" alt="" class="page2_right"> 
            <div class="page2_bottom">
                <span>2018销售大会</span>
            </div>
            <div class="page2_video">
                <video  src="movie.mp4" controls="controls"></video>
            </div>
        </div>

        <div class="section section_three ">
            <div class="page3_1 ">
                <span>销</span>
                <span>售</span>
                <span>大</span>
                <span>会</span>
            </div>
            <img src="images/page3_2.png" alt="" class="page3_2">
            <img src="images/page3_4.png" alt="" class="page3_4">
            <img src="images/page3_3.png" alt="" class="page3_3">
            <p class="page3_5">3/12-3/15</p>
            <p class="page3_6">南丰朗豪酒店</p>
        </div>

        <div class="section section_four ">
            <span class="page4_1">Thinking</span>
            <span class="page4_2">Beyond</span>
            <span class="page4_3">销售策略</span>
            <h2 class="page4_4">力拓新业务</h2>
            <img src="images/page4_5.png" alt="" class="page4_5">
            <p class="page4_6">可销售</p>
            <p class="page4_7">Winning</p>
            <p class="page4_8">产品方案</p>
            <p class="page4_9">行动计划</p>
        </div>
        <div class="section section_five ">
            <p class="page5_1"><i>坚</i><i>守</i></p>
            <img src="images/page5_2.png" alt="" class="page5_2">
            <img src="images/page5_3.png" alt="" class="page5_3">
            <!--<p class="page5_3">&</p>-->
            <h3 class="page5_4">变</h3>
            <h3 class="page5_5">通</h3>
            <img src="images/page5_6.png" alt="" class="page5_6">
        </div>
        <div class="section section_six ">
            <img src="images/page6_1.png" alt="" class="page6_1">
            <img src="images/page6_2.png" alt="" class="page6_2">
            <img src="images/page6_3.png" alt="" class="page6_3">
            <img src="images/page6_4.png" alt="" class="page6_4">
        </div>
        <div class="section section_last ">
            <img src="images/page7_child.png" alt="" class="page7_child">
            <img src="images/page7_want.png" alt="" class="page7_want">
            <p class="page7_p">广州销售大会等你来</p>
            <img src="images/page7_erwei.png" alt="" class="page7_erwei">
        </div>
    </div>
    <audio controls preload='auto'id='clickaudio' class="clickaudio">
            <source src="click.mp3" type="audio/mp3"></source>
    </audio>
    <audio controls preload='auto'id='audiolast' >
            <source src="vidoo.mp3" type="audio/mp3"></source>
    </audio>
    
</body>
<script>
    var img = [],
        flag = 0,
        mulitImg = [
            'images/section_1.png',
            'images/section_2.png',
            'images/section_3.png',
            'images/section_4.png',
            'images/section_5.png',
            'images/section_6.png',
            'images/section_7.png',
        ];
    var imgTotal = mulitImg.length;
    for (var i = 0; i < imgTotal; i++) {
        img[i] = new Image()
        img[i].src = mulitImg[i]
        img[i].onload = function () {
            //第i张图片加载完成
            flag++
            if (flag == imgTotal) {
                //全部加载完成
                setTimeout(function () {
                    $('.load').hide();
                }, 1000);
            }
        }
    }

</script>
<script id='appendfirstpage'></script>

</html>
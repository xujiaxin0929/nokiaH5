<!DOCTYPE html>

<html lang="zh-CN">

<head>

    <meta charset="utf-8">

    <title>nokia demo</title>

    <link rel="stylesheet" href="css/jquery.fullPage.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/jquery-ui-1.10.3.min.js"></script>
    <script src="js/jquery.fullPage.min.js"></script>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script>
        $(document).ready(function () {
            var myVideo = document.getElementById("audiofirst");
            var lastVideo = document.getElementById("audiolast");
            $.fn.fullpage({

                // slidesColor: ['#1bbc9b', '#4BBFC3', '#7BAABE', '#f90'],

                anchors: ['page1', 'page2', 'page3', 'page4', 'page5', 'page6', 'page7'],
                'setAutoScrolling': true,
                onLeave: function (index, nextIndex) {
                    console.log(index, nextIndex)
                    // console.log(nextIndex)
                    if (index == 1) {
                        myVideo.pause();
                    }
                },
                afterLoad: function (index) {
                    console.log(index);
                    if (index == 'page1' || index == 'page2') {
                        lastVideo.pause();

                    } else {
                        // lastVideo.play();
                        audioAutoPlay('audiolast');
                    }
                }
            });

            function play_music() {
                event.stopPropagation();
                audioAutoPlay('audiofirst');
                console.log(1)

            }
            $('#mc_play').on('click', function (e) {
                play_music();
            })
            // setInterval(function () {
            //     $.fn.fullpage.moveSectionDown();
            // }, 20000);
            function audioAutoPlay(id) {
                var audio = document.getElementById(id),
                    play = function () {
                        audio.play();
                        document.removeEventListener("touchstart", play, false);
                    };
                audio.play();
                document.addEventListener("WeixinJSBridgeReady", function () {
                    play();
                }, false);
                document.addEventListener('YixinJSBridgeReady', function () {
                    play();
                }, false);
                document.addEventListener("touchstart", play, false);
            }
            

        });
    </script>
</head>

<body>
    <div class="section section_fitst">
        <a href="javascript:;" id="mc_play" class="on">
            <img src="images/play.png" alt="">
           <audio controls id='audiofirst'>
                <source src="vido.mp3" type="audio/mp3"></source>
            </audio>
        </a>
    </div>

    <div class="section section_two">
    </div>

    <div class="section section_three">

    </div>

    <div class="section section_four">
    </div>
    <div class="section section_five">
    </div>
    <div class="section section_six">
    </div>
    <div class="section section_last">
    </div>

    <audio controls loop="loop" id='audiolast'>
        <source src="vidoo.mp3" type="audio/mp3"></source>
    </audio>
</body>

</html>